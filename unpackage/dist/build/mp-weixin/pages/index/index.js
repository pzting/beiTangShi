(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"0cae":function(t,e,r){"use strict";r.r(e);var o=r("f855"),i=r("90cd");for(var n in i)["default"].indexOf(n)<0&&function(t){r.d(e,t,(function(){return i[t]}))}(n);r("7df0");var s=r("f0c5"),u=Object(s["a"])(i["default"],o["b"],o["c"],!1,null,"e3766c5c",null,!1,o["a"],void 0);e["default"]=u.exports},2992:function(t,e,r){"use strict";(function(t,e){var o=r("4ea4");r("1f7d");o(r("66fd"));var i=o(r("0cae"));t.__webpack_require_UNI_MP_PLUGIN__=r,e(i.default)}).call(this,r("bc2e")["default"],r("543d")["createPage"])},"7a25":function(t,e,r){},"7df0":function(t,e,r){"use strict";var o=r("7a25"),i=r.n(o);i.a},"90cd":function(t,e,r){"use strict";r.r(e);var o=r("dab6"),i=r.n(o);for(var n in o)["default"].indexOf(n)<0&&function(t){r.d(e,t,(function(){return o[t]}))}(n);e["default"]=i.a},dab6:function(t,e,r){"use strict";(function(t){var o=r("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(r("9523")),n=o(r("448a")),s=r("14fc");function u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?u(Object(r),!0).forEach((function(e){(0,i.default)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var f={components:{},data:function(){return{Data:s.Data,DataPoemTemp:[],poemStr:s.poemStr,time:12e4,difficulty:{name:"简单",time:18e4,curNow:0,isTitle:!0,isAuthor:!0,isTitleHide:!1,isAuthorHide:!1,type:"simpleness"},type:"pause",isTitle:!0,isAuthor:!0,isOver:!1,isSetWord:!1,poem:{},arrEmpty:[],poemShuffle:[],poemWordCorrect:[],poemWordWrite:[],poemWordWriteCla:[],poemWordShuffle:[],poemWordShuffleCla:[],poemWordError:[],result:{len:"-"},word:"",wordLen:0,focus:"0-0",count:5,value:2,timeData:{},title:"规则",description:"规定时间内点击下面文字将唐诗补充完整"}},onLoad:function(){var e=t.getStorageSync("poemList")||[],r=s.poemStr.map((function(t){return(0,s.setPoemObj)(t)}));console.log("个数-",r.length,s.Data.poem.length,"本地：",e.length),s.Data.poem=[].concat((0,n.default)(s.Data.poem),(0,n.default)(e),(0,n.default)(r)),console.log("总个数",s.Data.poem.length),this.DataPoemTemp=(0,n.default)(s.Data.poem)},onReady:function(){var t=this;setTimeout((function(){t.init()}),100)},onShow:function(){var e=t.getStorageSync("difficulty");e&&(this.difficulty=a({},e)),this.isTitle=this.difficulty.isTitle,this.isAuthor=this.difficulty.isAuthor;var r=t.getStorageSync("poemList")||[];if(r){var o=[].concat((0,n.default)(s.Data.poem),(0,n.default)(r));o=(0,n.default)(new Map(o.map((function(t){return[t.title,t]}))).values()),s.Data.poem=(0,n.default)(o),this.DataPoemTemp=(0,n.default)(s.Data.poem)}},watch:{type:function(t,e){"over"===t&&this.addResult()}},methods:{init:function(){this.isTitle=this.difficulty.isTitle,this.isAuthor=this.difficulty.isAuthor;var t=this.shufflePoem();this.poem=this.DataPoemTemp[t],this.DataPoemTemp.splice(t,1);var e=this.poem.poemWord,r=this.setArr(e),o=r.arr,i=r.arrEmpty,n=r.arrError,s=r.arrCla;this.arrEmpty=this.deepClone2DArray(i),this.poemWordCorrect=o,this.poemWordWrite=this.deepClone2DArray(i),this.poemWordError=n,this.poemWordWriteCla=s,this.shuffleWord()},shufflePoem:function(){var e=t.$u.random(0,this.DataPoemTemp.length-1);return this.poemShuffle.length===s.Data.poem.length&&(this.poemShuffle=[],this.DataPoemTemp=(0,n.default)(s.Data.poem)),this.poemShuffle.push(e),e},deepClone2DArray:function(t){return t.map((function(t){return(0,n.default)(t)}))},shuffleWord:function(){this.poemWordWrite=this.deepClone2DArray(this.arrEmpty),this.focus="0-0";var t="".concat(this.poemWordCorrect);t=t.split(","),t=t.filter((function(t){return"，"!==t})),this.poemWordShuffle=this.shuffleArray(t),this.poemWordShuffleCla=new Array(this.poemWordShuffle.length).fill(!1)},shuffleArray:function(t){for(var e=t.length-1;e>0;e--){var r=Math.floor(Math.random()*(e+1)),o=[t[r],t[e]];t[e]=o[0],t[r]=o[1]}return t},setArr:function(t){var e=[],r=[],o=[],i=[];t=t.replace(/\s/g,"");var n=t.match(/。/g).length;this.result={},this.result.wordLen=t.match(/([^。，])/g).length;for(var s=0;s<n;s++)e.push([]),r.push([]),o.push([]),i.push([]);for(var u=0,a=0;a<t.length;a++){var f=t[a];"，"===f||","===f?(e[u].push(f),r[u].push(f),o[u].push(""),i[u].push(!1)):"。"===f||"."===f?u++:(f&&e[u].push(f),f&&r[u].push(""),f&&o[u].push(""),f&&i[u].push(!1))}return{arr:e,arrEmpty:r,arrError:o,arrCla:i}},recall:function(t,e){if(!this.isSetWord&&(this.focus="".concat(t,"-").concat(e),this.poemWordWrite[t][e])){var r=this.poemWordWrite[t][e];this.poemWordWrite[t][e]="";var o=this.poemWordShuffle.indexOf(r);this.poemWordShuffleCla[o]=!1}},setPoem:function(t,e){if(!this.poemWordShuffleCla[e])if(this.isSetWord)this.isSetWord=!0;else{var r=this.poemWordShuffleCla.filter((function(t){return!t}));if(0!==r.length){var o=this.focus.split("-"),i=Number(o[0]),n=Number(o[1]),s=i,u=n,f=this.poemWordCorrect[0].length,h=this.poemWordWrite[s][u];if(this.isOver=!1,h){var l=this.poemWordShuffle.indexOf(h);this.poemWordShuffleCla[l]=!1}if(this.poemWordShuffleCla[e]=!0,this.poemWordWrite[s][u]=t,i===this.poemWordCorrect.length-1)if(n===f-1){for(var c=!1,d=0;d<this.poemWordWrite.length;d++){var p=this.poemWordWrite[d];if(c)break;for(var m=0;m<p.length;m++){if(""===p[m]){console.log(p,d,m),i=d-1,n=m,c=!0;break}c=!1}}!1===c&&"over"!==this.type&&(this.pause(),this.type="over")}else if(n===f)return;this.poemWordCorrect[s][u]!==this.poemWordWrite[s][u]?(this.poemWordWriteCla[s][u]=!0,this.poemWordError[s][u]={word:this.poemWordCorrect[s][u],wordError:t,ind:this.focus}):(this.poemWordWriteCla[s][u]=!1,this.poemWordError[s][u]="");var W=this.poemWordError.flat(2);W=W.filter((function(t){return t})).map((function(t){return t.word}));var v=this.poemWordError.flat(2);v=v.filter((function(t){return t})).map((function(t){return t.wordError})),this.result=a(a({},this.result),{},{word:W,len:v.length,wordError:v}),n<f&&(n+=1,","!==this.poemWordCorrect[i][n]&&"，"!==this.poemWordCorrect[i][n]||(n+=1)),n===f&&i<this.poemWordCorrect.length-1&&(i+=1,n=0),this.focus="".concat(i,"-").concat(n),this.isSetWord=!1}else"over"!==this.type&&(this.pause(),this.type="over")}},start:function(){this.$refs.countDown.start(),this.type="start"},pause:function(){this.$refs.countDown.pause(),this.type="pause"},reset:function(){this.$refs.countDown.reset(),this.result={wordLen:this.result.wordLen},this.start(),this.shuffleWord()},changeOne:function(){this.$refs.countDown.reset(),this.init(),this.start()},onChange:function(t){this.timeData=t},onFinish:function(){this.type="over"},addResult:function(){var e=t.getStorageSync("dataResult"),r=s.Data.poem.length,o=0,i=0,n=0;e&&(o=Number(e.write),i=Number(e.success),n=Number(e.error)),0===this.result.len&&(i+=1),o+=1,n=o-i,t.setStorageSync("dataResult",{all:r,write:o,success:i,error:n})}}};e.default=f}).call(this,r("543d")["default"])},f855:function(t,e,r){"use strict";r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return n})),r.d(e,"a",(function(){return o}));var o={uAlert:function(){return Promise.all([r.e("common/vendor"),r.e("uni_modules/uview-ui/components/u-alert/u-alert")]).then(r.bind(null,"6a60"))},uButton:function(){return Promise.all([r.e("common/vendor"),r.e("uni_modules/uview-ui/components/u-button/u-button")]).then(r.bind(null,"e983"))},uCountDown:function(){return Promise.all([r.e("common/vendor"),r.e("uni_modules/uview-ui/components/u-count-down/u-count-down")]).then(r.bind(null,"3380"))}},i=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.isTitle=!0},t.e1=function(e){t.isAuthor=!0})},n=[]}},[["2992","common/runtime","common/vendor"]]]);