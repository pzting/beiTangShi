(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"04a8":function(e,t,n){"use strict";(function(e,t){var a=n("4ea4");n("47e0");a(n("66fd"));var r=a(n("dac6"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(r.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},7805:function(e,t,n){},"7cd8":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a}));var a={uTabs:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-tabs/u-tabs")]).then(n.bind(null,"8628"))},qiunDataCharts:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/qiun-data-charts/components/qiun-data-charts/qiun-data-charts")]).then(n.bind(null,"3378"))},uDatetimePicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-datetime-picker/u-datetime-picker")]).then(n.bind(null,"531e"))}},r=function(){var e=this,t=e.$createElement,a=(e._self._c,e.phone?e.$u.timeFormat(e.searchDate,"yyyy年mm月dd日"):null),r=e.phone?n("5513"):null,o=e.phone?Number(e.dayIncrList[e.dayIncrListInd].dayRate):null,i=e.phone?e.__map(e.monthIncrList,(function(t,n){var a=e.__get_orig(t),r=Number(t.yearRate),o=Object.assign({},e.optsArcbar,{title:{name:Number(t.monthRate)+"%",fontSize:15,color:t.monthRate>0?"#2fc25b":"#EE6666"},subtitle:{name:"月环比",fontSize:12,color:"#666666"}}),i={series:[{name:"月环比",color:t.monthRate>0?"#2fc25b":"#EE6666",data:Number(Math.abs(t.monthRate))/100}]},c={categories:[""],series:[{name:"本月",data:[Number(t.monthIncr)]},{name:"上月",data:[Number(t.lastMonthIncr)]}]};return{$orig:a,m2:r,a0:o,a1:i,a2:c}})):null,c=e.phone?e.__map(e.monthReachList,(function(t,n){var a=e.__get_orig(t),r=Number(t.monthRate),o={categories:[t.title],series:[{name:"本月",data:[Number(t.monthIncr)]},{name:"上月",data:[Number(t.lastMonthIncr)]}]};return{$orig:a,m3:r,a3:o}})):null,s=e.phone?Number(e.productIncrList[e.productIncrListInd].monthIncr):null,u=e.phone?Number(e.productIncrList[e.productIncrListInd].monthReach):null,d=e.phone?Number(e.productIncrList[e.productIncrListInd].dayRate):null;e._isMounted||(e.e0=function(t){e.showDate=!0},e.e1=function(t){e.showDate=!1},e.e2=function(t){e.showDate=!1},e.e3=function(t){e.showDate=!1}),e.$mp.data=Object.assign({},{$root:{g0:a,m0:r,m1:o,l0:i,l1:c,m4:s,m5:u,m6:d}})},o=[]},"8baa":function(e,t,n){"use strict";(function(e){var a=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("2eee")),o=a(n("448a")),i=a(n("c973")),c=n("b639"),s=(n("a9d0"),{components:{wybTable:function(){Promise.all([n.e("common/vendor"),n.e("components/wyb-table/wyb-table")]).then(function(){return resolve(n("0e9c"))}.bind(null,n)).catch(n.oe)}},data:function(){return{phone:e.getStorageSync("phone")||null,searchDate:Number(new Date),showDate:!1,sortCol:[{key:"score2",isNumber:!0},{key:"score3",isNumber:!0},{key:"score4",isNumber:!0},{key:"score5",isNumber:!0},{key:"score6",isNumber:!0}],headers:[{label:"名称",key:"score1",width:90},{label:"PV",key:"score2",width:80},{label:"UV",key:"score3",width:80},{label:"UV转化率",key:"score4",width:150},{label:"订购量",key:"score5",width:130},{label:"收银台转化率",key:"score6",width:180}],contents:[{score1:"短视频",score2:"99",score3:"99",score4:"99",score5:"99",score6:"99"},{score1:"综艺",score2:"199",score3:"199",score4:"199",score5:"199",score6:"199"},{score1:"99",score2:"99",score3:"99",score4:"99",score5:"99",score6:"99"},{score1:"99",score2:"99",score3:"99",score4:"99",score5:"99",score6:"99"},{score1:"99",score2:"99",score3:"99",score4:"99",score5:"99",score6:"99"},{score1:"99",score2:"99",score3:"99",score4:"99",score5:"99",score6:"99"}],optsArcbar:{color:["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],padding:void 0,extra:{arcbar:{type:"circle",width:10,backgroundColor:"#E9E9E9",startAngle:1.5,endAngle:.25,gap:2}}},optsMonthIncrList:{color:["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],padding:[0,60,0,0],enableScroll:!1,legend:{},xAxis:{boundaryGap:"justify",disableGrid:!0,disabled:!0,axisLine:!1},yAxis:{disabled:!0,disableGrid:!0},extra:{bar:{type:"group",width:10,meterBorde:1,meterFillColor:"#FFFFFF",activeBgColor:"#000000",activeBgOpacity:.08,linearType:"custom",barBorderCircle:!0,seriesGap:8,categoryGap:2}}},optsMonthReachList:{color:["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],padding:[0,70,0,0],enableScroll:!1,legend:{},xAxis:{min:0,max:100,boundaryGap:"justify",disableGrid:!0,disabled:!0,axisLine:!1},yAxis:{disabled:!0,disableGrid:!0},extra:{bar:{type:"group",width:10,meterBorde:1,meterFillColor:"#FFFFFF",activeBgColor:"#000000",activeBgOpacity:.08,linearType:"custom",barBorderCircle:!0,seriesGap:8,categoryGap:2}}},optsDayIncrList:{duration:300,color:["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],padding:[15,15,0,5],enableScroll:!1,legend:{show:!1},xAxis:{disableGrid:!0},yAxis:{disabled:!0,disableGrid:!0,data:[{min:0}]},extra:{column:{type:"group",width:20,activeBgColor:"#000000",activeBgOpacity:.08}}},optsProductIncrList:{duration:300,color:["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],padding:[15,15,0,5],enableScroll:!1,legend:{show:!1},xAxis:{disableGrid:!0},yAxis:{disabled:!0,disableGrid:!0,data:[{min:0}]},extra:{column:{type:"group",width:20,activeBgColor:"#000000",activeBgOpacity:.08}}},briefingDayDate:{},dayIncrList:[{dayRate:0,histogramData:{}}],dayIncrListInd:0,productIncrList:[{dayRate:0,monthIncr:0,monthReach:0,histogramData:{}}],productIncrListInd:0,monthIncrList:[],monthReachList:[]}},onReady:function(){this.toLogin()},onShow:function(){this.phone&&this.briefingDay(this.searchDate)},watch:{searchDate:function(e,t){this.briefingDay(e)}},methods:{briefingDay:function(t){var n=this;return(0,i.default)(r.default.mark((function a(){var i,s,u,d,l,h;return r.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=e.$u.timeFormat(t,"yyyy-mm-dd"),a.next=3,(0,c.briefingDayApi)({date:i});case 3:s=a.sent,n.briefingDayDate=s.obj,n.dayIncrList=s.obj.dayIncrList,u=s.obj.dayIncrList[n.dayIncrListInd].histogramData.series[0].data,d=Math.min.apply(Math,(0,o.default)(u)),n.optsDayIncrList.yAxis.data[0]={min:d>0?0:d-Math.pow(10,d.toString().length-2)},n.productIncrList=s.obj.productIncrList,l=s.obj.productIncrList[n.productIncrListInd].histogramData.series[0].data,h=Math.min.apply(Math,(0,o.default)(l)),n.optsProductIncrList.yAxis.data[0]={min:h>0?0:h-Math.pow(10,h.toString().length-2)},n.monthReachList=s.obj.monthReachList,n.monthIncrList=s.obj.monthIncrList;case 15:case"end":return a.stop()}}),a)})))()},mpGetUserInfo:function(){e.getUserProfile({desc:"desc",success:function(t){e.$u.toast(JSON.stringify(t.userInfo)),console.log("用户 为：",t)}})},toLogin:function(){var t=this;return(0,i.default)(r.default.mark((function n(){var a,o;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,new Promise((function(t,n){e.login({provider:"weixin",success:function(){var e=(0,i.default)(r.default.mark((function e(n){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("微信登录成功",n),t(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}));case 2:return a=n.sent,n.next=5,(0,c.loginApi)({code:a.code});case 5:if(o=n.sent,console.log("loginApi：",o),!o.phone||!o.auth){n.next=14;break}return t.briefingDay(t.searchDate),t.phone=o.phone,n.next=12,e.setStorageSync("phone",o.phone);case 12:n.next=19;break;case 14:if(o.auth){n.next=19;break}return e.showModal({title:"提示",content:"手机号不在白名单，请联系管理员添加~",showCancel:!1}),t.phone=null,n.next=19,e.setStorageSync("phone","");case 19:return n.next=21,e.setStorageSync("openid",o.openid);case 21:case"end":return n.stop()}}),n)})))()},onGetPhoneNumber:function(t){var n=this;return(0,i.default)(r.default.mark((function a(){var o,i;return r.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("getPhoneNumber:ok"===t.detail.errMsg){a.next=2;break}return a.abrupt("return");case 2:return console.log("onGetPhoneNumber",t.detail),a.next=5,e.getStorageSync("openid");case 5:return o=a.sent,a.next=8,(0,c.phoneApi)({encryptedData:t.detail.encryptedData,iv:t.detail.iv,openid:o});case 8:if(i=a.sent,console.log("phoneApi：",i),!i.phone||!i.auth){a.next=17;break}return n.briefingDay(n.searchDate),n.phone=i.phone,a.next=15,e.setStorageSync("phone",i.phone);case 15:a.next=22;break;case 17:if(i.auth){a.next=22;break}return e.showModal({title:"提示",content:"手机号不在白名单，请联系管理员添加~",showCancel:!1}),n.phone=null,a.next=22,e.setStorageSync("phone","");case 22:return a.next=24,e.setStorageSync("token",i.token);case 24:case"end":return a.stop()}}),a)})))()},clickDayIncrList:function(e){this.dayIncrListInd=e.index;var t=e.histogramData.series[0].data,n=Math.min.apply(Math,(0,o.default)(t));console.log(e),console.log("item.histogramData",e.histogramData.series[0].data,n),e.title.indexOf("率")>0?this.optsDayIncrList.yAxis.data[0]={min:0,max:100}:this.optsDayIncrList.yAxis.data[0]={min:n>0?0:n-Math.pow(10,n.toString().length-2)}},clickProductIncrList:function(e){this.productIncrListInd=e.index;var t=e.histogramData.series[0].data,n=Math.min.apply(Math,(0,o.default)(t));console.log("item.histogramData",e.histogramData.series[0].data,n),this.optsProductIncrList.yAxis.data[0]={min:n>0?0:n-Math.pow(10,n.toString().length-2)}}}});t.default=s}).call(this,n("543d")["default"])},c4a7:function(e,t,n){"use strict";var a=n("7805"),r=n.n(a);r.a},dac6:function(e,t,n){"use strict";n.r(t);var a=n("7cd8"),r=n("ff9a");for(var o in r)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n("c4a7");var i=n("f0c5"),c=Object(i["a"])(r["default"],a["b"],a["c"],!1,null,"36ad5a32",null,!1,a["a"],void 0);t["default"]=c.exports},ff9a:function(e,t,n){"use strict";n.r(t);var a=n("8baa"),r=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=r.a}},[["04a8","common/runtime","common/vendor"]]]);