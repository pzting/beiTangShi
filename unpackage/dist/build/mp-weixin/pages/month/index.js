(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/month/index"],{3350:function(e,t,a){"use strict";a.r(t);var n=a("8946"),r=a("e6fe");for(var i in r)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return r[e]}))}(i);a("f2f4");var o=a("f0c5"),s=Object(o["a"])(r["default"],n["b"],n["c"],!1,null,"ec72643c",null,!1,n["a"],void 0);t["default"]=s.exports},"5d24":function(e,t,a){"use strict";(function(e,t){var n=a("4ea4");a("47e0");n(a("66fd"));var r=n(a("3350"));e.__webpack_require_UNI_MP_PLUGIN__=a,t(r.default)}).call(this,a("bc2e")["default"],a("543d")["createPage"])},"7f34":function(e,t,a){"use strict";(function(e){var n=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("2eee")),i=n(a("448a")),o=n(a("c973")),s=a("b639"),c=(a("a9d0"),{components:{wybTable:function(){Promise.all([a.e("common/vendor"),a.e("components/wyb-table/wyb-table")]).then(function(){return resolve(a("0e9c"))}.bind(null,a)).catch(a.oe)}},data:function(){return{loginData:{},phone:e.getStorageSync("phone")||null,searchDate:Number(new Date),showDate:!1,listObj:{3:[{title:"整体数据",value:"wholeList"},{title:"新增数据",value:"incrList"},{title:"存量数据",value:"stockList"}],4:[{title:"收入整体数据",value:"incomeList"},{title:"新增数据",value:"incrList"},{title:"订购量数据",value:"orderList"},{title:"存量数据",value:"stockList"}]},colorObj:{3:["#2c58a7","#6f93ce","#87abca"],4:["#ee7c0e","#eda820","#3b9bb4","#99e2f0"],5:["#2c58a7","#ee7c0e","#eda820","#3b9bb4","#99e2f0"]},optsCustomList:{color:["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],padding:[0,70,0,0],enableScroll:!1,duration:100,fontSize:12,legend:{fontSize:10,lineHeight:16,itemGap:6,padding:2,margin:2},xAxis:{min:0,boundaryGap:"justify",disableGrid:!0,disabled:!0,axisLine:!1},yAxis:{disabled:!0,disableGrid:!0},extra:{bar:{type:"group",width:6,meterBorde:1,meterFillColor:"#FFFFFF",activeBgColor:"#000000",activeBgOpacity:.08,linearType:"opacity",linearOpacity:.8,barBorderCircle:!0,seriesGap:6,categoryGap:2}}},briefingDayDate:{},dayIncrList:[{dayRate:0,histogramData:{}}],dayIncrListInd:0,wholeData:{incrList:[],stockList:[],wholeList:[]},wholeDataVal:"wholeList",onScreenData:{incrList:[],stockList:[],wholeList:[]},onScreenDataVal:"wholeList",offScreenData:{incrList:[],stockList:[],wholeList:[]},offScreenDataVal:"wholeList",verticalScreenData:{incrList:[],stockList:[],orderList:[],incomeList:[]},verticalScreenDataVal:"incomeList",productWholeList:[{wholeList:[]}],productWholeListIdx:0}},onReady:function(){this.phone||this.toLogin()},onShow:function(){this.phone&&this.briefingDay(this.searchDate)},watch:{searchDate:function(e,t){this.briefingDay(e)}},methods:{briefingDay:function(t){var a=this;return(0,o.default)(r.default.mark((function n(){var i,o;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.$u.timeFormat(t,"yyyy-mm-dd"),n.next=3,(0,s.briefingMonthApi)({date:i});case 3:o=n.sent,a.wholeData=o.obj.wholeData,a.onScreenData=o.obj.onScreenData,a.offScreenData=o.obj.offScreenData,a.verticalScreenData=o.obj.verticalScreenData,a.productWholeList=o.obj.productWholeList;case 9:case"end":return n.stop()}}),n)})))()},toLogin:function(){var t=this;return(0,o.default)(r.default.mark((function a(){var n,i;return r.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,new Promise((function(t,a){e.login({provider:"weixin",success:function(){var e=(0,o.default)(r.default.mark((function e(a){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("微信登录成功",a),t(a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}));case 2:return n=a.sent,a.next=5,(0,s.loginApi)({code:n.code});case 5:if(i=a.sent,t.loginData=i,console.log("loginApi：",i),!i.phone||!i.auth){a.next=15;break}return t.briefingDay(t.searchDate),t.phone=i.phone,a.next=13,e.setStorageSync("phone",i.phone);case 13:a.next=20;break;case 15:if(i.auth){a.next=20;break}return e.showModal({title:"提示",content:"手机号不在白名单，请联系管理员添加~",showCancel:!1}),t.phone=null,a.next=20,e.setStorageSync("phone","");case 20:return a.next=22,e.setStorageSync("openid",i.openid);case 22:case"end":return a.stop()}}),a)})))()},onGetPhoneNumber:function(t){var a=this;return(0,o.default)(r.default.mark((function n(){var i,o;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("getPhoneNumber:ok"===t.detail.errMsg){n.next=2;break}return n.abrupt("return");case 2:return console.log("onGetPhoneNumber",t.detail),n.next=5,e.getStorageSync("openid");case 5:return i=n.sent,n.next=8,(0,s.phoneApi)({encryptedData:t.detail.encryptedData,iv:t.detail.iv,openid:i});case 8:if(o=n.sent,console.log("phoneApi：",o),!o.phone||!o.auth){n.next=17;break}return a.briefingDay(a.searchDate),a.phone=o.phone,n.next=15,e.setStorageSync("phone",o.phone);case 15:n.next=22;break;case 17:if(o.auth){n.next=22;break}return e.showModal({title:"提示",content:"手机号不在白名单，请联系管理员添加~",showCancel:!1}),a.phone=null,n.next=22,e.setStorageSync("phone","");case 22:return n.next=24,e.setStorageSync("token",o.token);case 24:case"end":return n.stop()}}),n)})))()},clickDayIncrList:function(e){this.dayIncrListInd=e.index,this.monthReachList[0]={rateList:[{name:"订购量111"+e.index,rate:.25+e.index}],histogramData:{categories:[""],series:[{name:"日新增1",data:[30+e.index]},{name:"日新增2",data:[-8+e.index]},{name:"日新增3",data:[20]}]}}},clickTabsWholeData:function(e){console.log(e,"item"),this.wholeDataVal=e.value},clickTabsOnScreenData:function(e){console.log(e,"item"),this.onScreenDataVal=e.value},clickTabsOffScreenData:function(e){console.log(e,"item"),this.offScreenDataVal=e.value},clickTabsVerticalScreenData:function(e){console.log(e,"item"),this.verticalScreenDataVal=e.value},clickTabsProductWholeList:function(e){console.log(e,"item"),this.productWholeListIdx=e.index},clickProductIncrList:function(e){this.productIncrListInd=e.index;var t=e.histogramData.series[0].data,a=Math.min.apply(Math,(0,i.default)(t));console.log("item.histogramData",e.histogramData.series[0].data,a),this.optsProductIncrList.yAxis.data[0]={min:a>0?0:a-Math.pow(10,a.toString().length-2)}}}});t.default=c}).call(this,a("543d")["default"])},8946:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return n}));var n={uTabs:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/uview-ui/components/u-tabs/u-tabs")]).then(a.bind(null,"8628"))},qiunDataCharts:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/qiun-data-charts/components/qiun-data-charts/qiun-data-charts")]).then(a.bind(null,"3378"))},uDatetimePicker:function(){return Promise.all([a.e("common/vendor"),a.e("uni_modules/uview-ui/components/u-datetime-picker/u-datetime-picker")]).then(a.bind(null,"531e"))}},r=function(){var e=this,t=e.$createElement,n=(e._self._c,e.phone?e.$u.timeFormat(e.searchDate,"yyyy年mm月dd日"):null),r=e.phone?a("5513"):null,i=e.phone?e.__map(e.wholeData[e.wholeDataVal],(function(t,a){var n=e.__get_orig(t),r=e.__map(t.rateList,(function(t,a){var n=e.__get_orig(t),r=Number(t.rate),i=t.name.search(/[差值价]/);return{$orig:n,m1:r,g1:i}})),i=t.histogramData.series?t.histogramData.series.length:null,o=t.histogramData.series?Object.assign({},e.optsCustomList,{color:e.colorObj[t.histogramData.series.length]}):null;return{$orig:n,l0:r,g2:i,a0:o}})):null,o=e.phone?e.__map(e.onScreenData[e.onScreenDataVal],(function(t,a){var n=e.__get_orig(t),r=e.__map(t.rateList,(function(t,a){var n=e.__get_orig(t),r=Number(t.rate),i=t.name.search(/[差值价]/);return{$orig:n,m2:r,g3:i}})),i=t.histogramData.series?t.histogramData.series.length:null,o=t.histogramData.series?Object.assign({},e.optsCustomList,{color:e.colorObj[t.histogramData.series.length]}):null;return{$orig:n,l2:r,g4:i,a1:o}})):null,s=e.phone?e.__map(e.offScreenData[e.offScreenDataVal],(function(t,a){var n=e.__get_orig(t),r=e.__map(t.rateList,(function(t,a){var n=e.__get_orig(t),r=Number(t.rate),i=t.name.search(/[差值价]/);return{$orig:n,m3:r,g5:i}})),i=t.histogramData.series?t.histogramData.series.length:null,o=t.histogramData.series?Object.assign({},e.optsCustomList,{color:e.colorObj[t.histogramData.series.length]}):null;return{$orig:n,l4:r,g6:i,a2:o}})):null,c=e.phone?e.__map(e.verticalScreenData[e.verticalScreenDataVal],(function(t,a){var n=e.__get_orig(t),r=e.__map(t.rateList,(function(t,a){var n=e.__get_orig(t),r=Number(t.rate),i=t.name.search(/[差值价]/);return{$orig:n,m4:r,g7:i}})),i=t.histogramData.series?t.histogramData.series.length:null,o=t.histogramData.series?Object.assign({},e.optsCustomList,{color:e.colorObj[t.histogramData.series.length]}):null;return{$orig:n,l6:r,g8:i,a3:o}})):null,l=e.phone?e.__map(e.productWholeList[e.productWholeListIdx].wholeList,(function(t,a){var n=e.__get_orig(t),r=e.__map(t.rateList,(function(t,a){var n=e.__get_orig(t),r=Number(t.rate),i=t.name.search(/[差值价]/);return{$orig:n,m5:r,g9:i}})),i=t.histogramData.series?t.histogramData.series.length:null,o=t.histogramData.series?Object.assign({},e.optsCustomList,{color:e.colorObj[t.histogramData.series.length]}):null;return{$orig:n,l8:r,g10:i,a4:o}})):null;e._isMounted||(e.e0=function(t){e.showDate=!0},e.e1=function(t){e.showDate=!1},e.e2=function(t){e.showDate=!1},e.e3=function(t){e.showDate=!1}),e.$mp.data=Object.assign({},{$root:{g0:n,m0:r,l1:i,l3:o,l5:s,l7:c,l9:l}})},i=[]},d955:function(e,t,a){},e6fe:function(e,t,a){"use strict";a.r(t);var n=a("7f34"),r=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=r.a},f2f4:function(e,t,a){"use strict";var n=a("d955"),r=a.n(n);r.a}},[["5d24","common/runtime","common/vendor"]]]);