(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/week/index"],{"06ea":function(e,t,n){"use strict";(function(e,t){var a=n("4ea4");n("47e0");a(n("66fd"));var r=a(n("95d5"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(r.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},"309e":function(e,t,n){},6868:function(e,t,n){"use strict";var a=n("309e"),r=n.n(a);r.a},"797a":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a}));var a={qiunDataCharts:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/qiun-data-charts/components/qiun-data-charts/qiun-data-charts")]).then(n.bind(null,"3378"))},uDatetimePicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-datetime-picker/u-datetime-picker")]).then(n.bind(null,"531e"))}},r=function(){var e=this,t=e.$createElement,a=(e._self._c,e.phone?e.$u.timeFormat(e.searchDate,"yyyy年mm月dd日"):null),r=e.phone?n("5513"):null,o=e.phone?e.__map(e.incomeList,(function(t,n){var a=e.__get_orig(t),r=e.__map(t.rateList,(function(t,n){var a=e.__get_orig(t),r=Number(t.rate);return{$orig:a,m1:r}}));return{$orig:a,l0:r}})):null,i=e.phone?e.__map(e.customList,(function(t,n){var a=e.__get_orig(t),r=e.__map(t.rateList,(function(t,n){var a=e.__get_orig(t),r=Number(t.rate);return{$orig:a,m2:r}}));return{$orig:a,l2:r}})):null;e._isMounted||(e.e0=function(t){e.showDate=!0},e.e1=function(t){e.showDate=!1},e.e2=function(t){e.showDate=!1},e.e3=function(t){e.showDate=!1}),e.$mp.data=Object.assign({},{$root:{g0:a,m0:r,l1:o,l3:i}})},o=[]},"95d5":function(e,t,n){"use strict";n.r(t);var a=n("797a"),r=n("9ec8");for(var o in r)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n("6868");var i=n("f0c5"),c=Object(i["a"])(r["default"],a["b"],a["c"],!1,null,"6404e092",null,!1,a["a"],void 0);t["default"]=c.exports},"9ec8":function(e,t,n){"use strict";n.r(t);var a=n("a523"),r=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=r.a},a523:function(e,t,n){"use strict";(function(e){var a=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("2eee")),o=a(n("c973")),i=n("b639"),c=(n("a9d0"),{components:{wybTable:function(){Promise.all([n.e("common/vendor"),n.e("components/wyb-table/wyb-table")]).then(function(){return resolve(n("0e9c"))}.bind(null,n)).catch(n.oe)}},data:function(){return{loginData:{},phone:e.getStorageSync("phone")||null,searchDate:Number(new Date),showDate:!1,optsIncomeList:{color:["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],padding:[0,70,0,0],enableScroll:!1,legend:{},xAxis:{min:0,boundaryGap:"justify",disableGrid:!0,disabled:!0,axisLine:!1},yAxis:{disabled:!0,disableGrid:!0},extra:{bar:{type:"group",width:10,meterBorde:1,meterFillColor:"#FFFFFF",activeBgColor:"#000000",activeBgOpacity:.08,linearType:"custom",barBorderCircle:!0,seriesGap:8,categoryGap:2}}},optsCustomList:{color:["#2c58a7","#6f93ce","#87abca"],padding:[0,70,0,0],enableScroll:!1,legend:{},xAxis:{min:0,boundaryGap:"justify",disableGrid:!0,disabled:!0,axisLine:!1},yAxis:{disabled:!0,disableGrid:!0},extra:{bar:{type:"group",width:10,meterBorde:1,meterFillColor:"#FFFFFF",activeBgColor:"#000000",activeBgOpacity:.08,linearType:"none",barBorderCircle:!0,seriesGap:8,categoryGap:2}}},customList:[],incomeList:[]}},onReady:function(){this.phone||this.toLogin()},onShow:function(){this.phone&&this.briefingDay(this.searchDate)},watch:{searchDate:function(e,t){this.briefingDay(e)}},methods:{briefingDay:function(t){var n=this;return(0,o.default)(r.default.mark((function a(){var o,c;return r.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return o=e.$u.timeFormat(t,"yyyy-mm-dd"),a.next=3,(0,i.briefingWeekApi)({date:o});case 3:c=a.sent,n.incomeList=c.obj.incomeList,n.customList=c.obj.customList;case 6:case"end":return a.stop()}}),a)})))()},toLogin:function(){var t=this;return(0,o.default)(r.default.mark((function n(){var a,c;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,new Promise((function(t,n){e.login({provider:"weixin",success:function(){var e=(0,o.default)(r.default.mark((function e(n){return r.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("微信登录成功",n),t(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}));case 2:return a=n.sent,n.next=5,(0,i.loginApi)({code:a.code});case 5:if(c=n.sent,t.loginData=c,console.log("loginApi：",c),!c.phone||!c.auth){n.next=15;break}return t.briefingDay(t.searchDate),t.phone=c.phone,n.next=13,e.setStorageSync("phone",c.phone);case 13:n.next=20;break;case 15:if(c.auth){n.next=20;break}return e.showModal({title:"提示",content:"手机号不在白名单，请联系管理员添加~",showCancel:!1}),t.phone=null,n.next=20,e.setStorageSync("phone","");case 20:return n.next=22,e.setStorageSync("openid",c.openid);case 22:case"end":return n.stop()}}),n)})))()},onGetPhoneNumber:function(t){var n=this;return(0,o.default)(r.default.mark((function a(){var o,c;return r.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("getPhoneNumber:ok"===t.detail.errMsg){a.next=2;break}return a.abrupt("return");case 2:return console.log("onGetPhoneNumber",t.detail),a.next=5,e.getStorageSync("openid");case 5:return o=a.sent,a.next=8,(0,i.phoneApi)({encryptedData:t.detail.encryptedData,iv:t.detail.iv,openid:o});case 8:if(c=a.sent,console.log("phoneApi：",c),!c.phone||!c.auth){a.next=17;break}return n.briefingDay(n.searchDate),n.phone=c.phone,a.next=15,e.setStorageSync("phone",c.phone);case 15:a.next=22;break;case 17:if(c.auth){a.next=22;break}return e.showModal({title:"提示",content:"手机号不在白名单，请联系管理员添加~",showCancel:!1}),n.phone=null,a.next=22,e.setStorageSync("phone","");case 22:return a.next=24,e.setStorageSync("token",c.token);case 24:case"end":return a.stop()}}),a)})))()}}});t.default=c}).call(this,n("543d")["default"])}},[["06ea","common/runtime","common/vendor"]]]);