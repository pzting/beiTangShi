(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{161:function(e,t,n){"use strict";(function(e,t){var r=n(4);n(26);r(n(25));var o=r(n(162));e.__webpack_require_UNI_MP_PLUGIN__=n,t(o.default)}).call(this,n(1)["default"],n(2)["createPage"])},162:function(e,t,n){"use strict";n.r(t);var r=n(163),o=n(166);for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);n(169);var i,c=n(32),s=Object(c["default"])(o["default"],r["render"],r["staticRenderFns"],!1,null,"57280228",null,!1,r["components"],i);s.options.__file="pages/index/index.vue",t["default"]=s.exports},163:function(e,t,n){"use strict";n.r(t);var r=n(164);n.d(t,"render",(function(){return r["render"]})),n.d(t,"staticRenderFns",(function(){return r["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return r["recyclableRender"]})),n.d(t,"components",(function(){return r["components"]}))},164:function(e,t,n){"use strict";var r;n.r(t),n.d(t,"render",(function(){return o})),n.d(t,"staticRenderFns",(function(){return i})),n.d(t,"recyclableRender",(function(){return a})),n.d(t,"components",(function(){return r}));try{r={uTabs:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-tabs/u-tabs")]).then(n.bind(null,195))},qiunDataCharts:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/qiun-data-charts/components/qiun-data-charts/qiun-data-charts")]).then(n.bind(null,203))},uDatetimePicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-datetime-picker/u-datetime-picker")]).then(n.bind(null,221))}}}catch(c){if(-1===c.message.indexOf("Cannot find module")||-1===c.message.indexOf(".vue"))throw c;console.error(c.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var o=function(){var e=this,t=e.$createElement,r=(e._self._c,e.phone?e.$u.timeFormat(e.searchDate,"yyyy年mm月dd日"):null),o=e.phone?n(165):null,a=e.phone?Number(e.dayIncrList[e.dayIncrListInd].dayRate):null,i=e.phone?e.__map(e.monthIncrList,(function(t,n){var r=e.__get_orig(t),o=Number(t.yearRate),a=Object.assign({},e.optsArcbar,{title:{name:Number(t.monthRate)+"%",fontSize:15,color:t.monthRate>0?"#2fc25b":"#EE6666"},subtitle:{name:"月环比",fontSize:12,color:"#666666"}}),i={series:[{name:"月环比",color:t.monthRate>0?"#2fc25b":"#EE6666",data:Number(Math.abs(t.monthRate))/100}]},c={categories:[""],series:[{name:"本月",data:[Number(t.monthIncr)]},{name:"上月",data:[Number(t.lastMonthIncr)]}]};return{$orig:r,m2:o,a0:a,a1:i,a2:c}})):null,c=e.phone?e.__map(e.monthReachList,(function(t,n){var r=e.__get_orig(t),o=Number(t.monthRate),a={categories:[t.title],series:[{name:"本月",data:[Number(t.monthIncr)]},{name:"上月",data:[Number(t.lastMonthIncr)]}]};return{$orig:r,m3:o,a3:a}})):null,s=e.phone?Number(e.productIncrList[e.productIncrListInd].monthIncr):null,u=e.phone?Number(e.productIncrList[e.productIncrListInd].monthReach):null,d=e.phone?Number(e.productIncrList[e.productIncrListInd].dayRate):null;e._isMounted||(e.e0=function(t){e.showDate=!0},e.e1=function(t){e.showDate=!1},e.e2=function(t){e.showDate=!1},e.e3=function(t){e.showDate=!1}),e.$mp.data=Object.assign({},{$root:{g0:r,m0:o,m1:a,l0:i,l1:c,m4:s,m5:u,m6:d}})},a=!1,i=[];o._withStripped=!0},166:function(e,t,n){"use strict";n.r(t);var r=n(167),o=n.n(r);for(var a in r)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t["default"]=o.a},167:function(e,t,n){"use strict";(function(e){var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(56)),a=r(n(18)),i=r(n(58)),c=n(168),s=(n(160),function(){Promise.all([n.e("common/vendor"),n.e("components/wyb-table/wyb-table")]).then(function(){return resolve(n(230))}.bind(null,n)).catch(n.oe)}),u={components:{wybTable:s},data:function(){return{phone:e.getStorageSync("phone")||null,searchDate:Number(new Date),showDate:!1,sortCol:[{key:"score2",isNumber:!0},{key:"score3",isNumber:!0},{key:"score4",isNumber:!0},{key:"score5",isNumber:!0},{key:"score6",isNumber:!0}],headers:[{label:"名称",key:"score1",width:90},{label:"PV",key:"score2",width:80},{label:"UV",key:"score3",width:80},{label:"UV转化率",key:"score4",width:150},{label:"订购量",key:"score5",width:130},{label:"收银台转化率",key:"score6",width:180}],contents:[{score1:"短视频",score2:"99",score3:"99",score4:"99",score5:"99",score6:"99"},{score1:"综艺",score2:"199",score3:"199",score4:"199",score5:"199",score6:"199"},{score1:"99",score2:"99",score3:"99",score4:"99",score5:"99",score6:"99"},{score1:"99",score2:"99",score3:"99",score4:"99",score5:"99",score6:"99"},{score1:"99",score2:"99",score3:"99",score4:"99",score5:"99",score6:"99"},{score1:"99",score2:"99",score3:"99",score4:"99",score5:"99",score6:"99"}],optsArcbar:{color:["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],padding:void 0,extra:{arcbar:{type:"circle",width:10,backgroundColor:"#E9E9E9",startAngle:1.5,endAngle:.25,gap:2}}},optsMonthIncrList:{color:["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],padding:[0,60,0,0],enableScroll:!1,legend:{},xAxis:{boundaryGap:"justify",disableGrid:!0,disabled:!0,axisLine:!1},yAxis:{disabled:!0,disableGrid:!0},extra:{bar:{type:"group",width:10,meterBorde:1,meterFillColor:"#FFFFFF",activeBgColor:"#000000",activeBgOpacity:.08,linearType:"custom",barBorderCircle:!0,seriesGap:8,categoryGap:2}}},optsMonthReachList:{color:["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],padding:[0,70,0,0],enableScroll:!1,legend:{},xAxis:{min:0,max:100,boundaryGap:"justify",disableGrid:!0,disabled:!0,axisLine:!1},yAxis:{disabled:!0,disableGrid:!0},extra:{bar:{type:"group",width:10,meterBorde:1,meterFillColor:"#FFFFFF",activeBgColor:"#000000",activeBgOpacity:.08,linearType:"custom",barBorderCircle:!0,seriesGap:8,categoryGap:2}}},optsDayIncrList:{duration:300,color:["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],padding:[15,15,0,5],enableScroll:!1,legend:{show:!1},xAxis:{disableGrid:!0},yAxis:{disabled:!0,disableGrid:!0,data:[{min:0}]},extra:{column:{type:"group",width:20,activeBgColor:"#000000",activeBgOpacity:.08}}},optsProductIncrList:{duration:300,color:["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],padding:[15,15,0,5],enableScroll:!1,legend:{show:!1},xAxis:{disableGrid:!0},yAxis:{disabled:!0,disableGrid:!0,data:[{min:0}]},extra:{column:{type:"group",width:20,activeBgColor:"#000000",activeBgOpacity:.08}}},briefingDayDate:{},dayIncrList:[{dayRate:0,histogramData:{}}],dayIncrListInd:0,productIncrList:[{dayRate:0,monthIncr:0,monthReach:0,histogramData:{}}],productIncrListInd:0,monthIncrList:[],monthReachList:[]}},onReady:function(){this.toLogin()},onShow:function(){this.phone&&this.briefingDay(this.searchDate)},watch:{searchDate:function(e,t){this.briefingDay(e)}},methods:{briefingDay:function(t){var n=this;return(0,i.default)(o.default.mark((function r(){var i,s,u,d,l,h;return o.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i=e.$u.timeFormat(t,"yyyy-mm-dd"),r.next=3,(0,c.briefingDayApi)({date:i});case 3:s=r.sent,n.briefingDayDate=s.obj,n.dayIncrList=s.obj.dayIncrList,u=s.obj.dayIncrList[n.dayIncrListInd].histogramData.series[0].data,d=Math.min.apply(Math,(0,a.default)(u)),n.optsDayIncrList.yAxis.data[0]={min:d>0?0:d-Math.pow(10,d.toString().length-2)},n.productIncrList=s.obj.productIncrList,l=s.obj.productIncrList[n.productIncrListInd].histogramData.series[0].data,h=Math.min.apply(Math,(0,a.default)(l)),n.optsProductIncrList.yAxis.data[0]={min:h>0?0:h-Math.pow(10,h.toString().length-2)},n.monthReachList=s.obj.monthReachList,n.monthIncrList=s.obj.monthIncrList;case 15:case"end":return r.stop()}}),r)})))()},mpGetUserInfo:function(){e.getUserProfile({desc:"desc",success:function(t){e.$u.toast(JSON.stringify(t.userInfo)),console.log("用户 为：",t)}})},toLogin:function(){var t=this;return(0,i.default)(o.default.mark((function n(){var r,a;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,new Promise((function(t,n){e.login({provider:"weixin",success:function(){var e=(0,i.default)(o.default.mark((function e(n){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("微信登录成功",n),t(n);case 2:case"end":return e.stop()}}),e)})));function n(t){return e.apply(this,arguments)}return n}()})}));case 2:return r=n.sent,n.next=5,(0,c.loginApi)({code:r.code});case 5:if(a=n.sent,console.log("loginApi：",a),!a.phone||!a.auth){n.next=14;break}return t.briefingDay(t.searchDate),t.phone=a.phone,n.next=12,e.setStorageSync("phone",a.phone);case 12:n.next=19;break;case 14:if(a.auth){n.next=19;break}return e.showModal({title:"提示",content:"手机号不在白名单，请联系管理员添加~",showCancel:!1}),t.phone=null,n.next=19,e.setStorageSync("phone","");case 19:return n.next=21,e.setStorageSync("openid",a.openid);case 21:case"end":return n.stop()}}),n)})))()},onGetPhoneNumber:function(t){var n=this;return(0,i.default)(o.default.mark((function r(){var a,i;return o.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if("getPhoneNumber:ok"===t.detail.errMsg){r.next=2;break}return r.abrupt("return");case 2:return console.log("onGetPhoneNumber",t.detail),r.next=5,e.getStorageSync("openid");case 5:return a=r.sent,r.next=8,(0,c.phoneApi)({encryptedData:t.detail.encryptedData,iv:t.detail.iv,openid:a});case 8:if(i=r.sent,console.log("phoneApi：",i),!i.phone||!i.auth){r.next=17;break}return n.briefingDay(n.searchDate),n.phone=i.phone,r.next=15,e.setStorageSync("phone",i.phone);case 15:r.next=22;break;case 17:if(i.auth){r.next=22;break}return e.showModal({title:"提示",content:"手机号不在白名单，请联系管理员添加~",showCancel:!1}),n.phone=null,r.next=22,e.setStorageSync("phone","");case 22:return r.next=24,e.setStorageSync("token",i.token);case 24:case"end":return r.stop()}}),r)})))()},clickDayIncrList:function(e){this.dayIncrListInd=e.index;var t=e.histogramData.series[0].data,n=Math.min.apply(Math,(0,a.default)(t));console.log(e),console.log("item.histogramData",e.histogramData.series[0].data,n),e.title.indexOf("率")>0?this.optsDayIncrList.yAxis.data[0]={min:0,max:100}:this.optsDayIncrList.yAxis.data[0]={min:n>0?0:n-Math.pow(10,n.toString().length-2)}},clickProductIncrList:function(e){this.productIncrListInd=e.index;var t=e.histogramData.series[0].data,n=Math.min.apply(Math,(0,a.default)(t));console.log("item.histogramData",e.histogramData.series[0].data,n),this.optsProductIncrList.yAxis.data[0]={min:n>0?0:n-Math.pow(10,n.toString().length-2)}}}};t.default=u}).call(this,n(2)["default"])},169:function(e,t,n){"use strict";n.r(t);var r=n(170),o=n.n(r);for(var a in r)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(a);t["default"]=o.a},170:function(e,t,n){}},[[161,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/index/index.js.map