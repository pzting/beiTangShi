(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/week/index"],{179:function(e,n,t){"use strict";(function(e,n){var r=t(4);t(26);r(t(25));var o=r(t(180));e.__webpack_require_UNI_MP_PLUGIN__=t,n(o.default)}).call(this,t(1)["default"],t(2)["createPage"])},180:function(e,n,t){"use strict";t.r(n);var r=t(181),o=t(183);for(var a in o)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(a);t(185);var i,c=t(32),u=Object(c["default"])(o["default"],r["render"],r["staticRenderFns"],!1,null,"c6dca6a0",null,!1,r["components"],i);u.options.__file="pages/week/index.vue",n["default"]=u.exports},181:function(e,n,t){"use strict";t.r(n);var r=t(182);t.d(n,"render",(function(){return r["render"]})),t.d(n,"staticRenderFns",(function(){return r["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return r["recyclableRender"]})),t.d(n,"components",(function(){return r["components"]}))},182:function(e,n,t){"use strict";var r;t.r(n),t.d(n,"render",(function(){return o})),t.d(n,"staticRenderFns",(function(){return i})),t.d(n,"recyclableRender",(function(){return a})),t.d(n,"components",(function(){return r}));try{r={qiunDataCharts:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/qiun-data-charts/components/qiun-data-charts/qiun-data-charts")]).then(t.bind(null,203))},uDatetimePicker:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uview-ui/components/u-datetime-picker/u-datetime-picker")]).then(t.bind(null,221))}}}catch(c){if(-1===c.message.indexOf("Cannot find module")||-1===c.message.indexOf(".vue"))throw c;console.error(c.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var o=function(){var e=this,n=e.$createElement,r=(e._self._c,e.phone?e.$u.timeFormat(e.searchDate,"yyyy年mm月dd日"):null),o=e.phone?t(165):null,a=e.phone?e.__map(e.incomeList,(function(n,t){var r=e.__get_orig(n),o=e.__map(n.rateList,(function(n,t){var r=e.__get_orig(n),o=Number(n.rate);return{$orig:r,m1:o}}));return{$orig:r,l0:o}})):null,i=e.phone?e.__map(e.customList,(function(n,t){var r=e.__get_orig(n),o=e.__map(n.rateList,(function(n,t){var r=e.__get_orig(n),o=Number(n.rate);return{$orig:r,m2:o}}));return{$orig:r,l2:o}})):null;e._isMounted||(e.e0=function(n){e.showDate=!0},e.e1=function(n){e.showDate=!1},e.e2=function(n){e.showDate=!1},e.e3=function(n){e.showDate=!1}),e.$mp.data=Object.assign({},{$root:{g0:r,m0:o,l1:a,l3:i}})},a=!1,i=[];o._withStripped=!0},183:function(e,n,t){"use strict";t.r(n);var r=t(184),o=t.n(r);for(var a in r)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(a);n["default"]=o.a},184:function(e,n,t){"use strict";(function(e){var r=t(4);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(t(56)),a=r(t(58)),i=t(168),c=(t(160),function(){Promise.all([t.e("common/vendor"),t.e("components/wyb-table/wyb-table")]).then(function(){return resolve(t(230))}.bind(null,t)).catch(t.oe)}),u={components:{wybTable:c},data:function(){return{loginData:{},phone:e.getStorageSync("phone")||null,searchDate:Number(new Date),showDate:!1,optsIncomeList:{color:["#1890FF","#91CB74","#FAC858","#EE6666","#73C0DE","#3CA272","#FC8452","#9A60B4","#ea7ccc"],padding:[0,70,0,0],enableScroll:!1,legend:{},xAxis:{min:0,boundaryGap:"justify",disableGrid:!0,disabled:!0,axisLine:!1},yAxis:{disabled:!0,disableGrid:!0},extra:{bar:{type:"group",width:10,meterBorde:1,meterFillColor:"#FFFFFF",activeBgColor:"#000000",activeBgOpacity:.08,linearType:"custom",barBorderCircle:!0,seriesGap:8,categoryGap:2}}},optsCustomList:{color:["#2c58a7","#6f93ce","#87abca"],padding:[0,70,0,0],enableScroll:!1,legend:{},xAxis:{min:0,boundaryGap:"justify",disableGrid:!0,disabled:!0,axisLine:!1},yAxis:{disabled:!0,disableGrid:!0},extra:{bar:{type:"group",width:10,meterBorde:1,meterFillColor:"#FFFFFF",activeBgColor:"#000000",activeBgOpacity:.08,linearType:"none",barBorderCircle:!0,seriesGap:8,categoryGap:2}}},customList:[],incomeList:[]}},onReady:function(){this.phone||this.toLogin()},onShow:function(){this.phone&&this.briefingDay(this.searchDate)},watch:{searchDate:function(e,n){this.briefingDay(e)}},methods:{briefingDay:function(n){var t=this;return(0,a.default)(o.default.mark((function r(){var a,c;return o.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.$u.timeFormat(n,"yyyy-mm-dd"),r.next=3,(0,i.briefingWeekApi)({date:a});case 3:c=r.sent,t.incomeList=c.obj.incomeList,t.customList=c.obj.customList;case 6:case"end":return r.stop()}}),r)})))()},toLogin:function(){var n=this;return(0,a.default)(o.default.mark((function t(){var r,c;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(n,t){e.login({provider:"weixin",success:function(){var e=(0,a.default)(o.default.mark((function e(t){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log("微信登录成功",t),n(t);case 2:case"end":return e.stop()}}),e)})));function t(n){return e.apply(this,arguments)}return t}()})}));case 2:return r=t.sent,t.next=5,(0,i.loginApi)({code:r.code});case 5:if(c=t.sent,n.loginData=c,console.log("loginApi：",c),!c.phone||!c.auth){t.next=15;break}return n.briefingDay(n.searchDate),n.phone=c.phone,t.next=13,e.setStorageSync("phone",c.phone);case 13:t.next=20;break;case 15:if(c.auth){t.next=20;break}return e.showModal({title:"提示",content:"手机号不在白名单，请联系管理员添加~",showCancel:!1}),n.phone=null,t.next=20,e.setStorageSync("phone","");case 20:return t.next=22,e.setStorageSync("openid",c.openid);case 22:case"end":return t.stop()}}),t)})))()},onGetPhoneNumber:function(n){var t=this;return(0,a.default)(o.default.mark((function r(){var a,c;return o.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if("getPhoneNumber:ok"===n.detail.errMsg){r.next=2;break}return r.abrupt("return");case 2:return console.log("onGetPhoneNumber",n.detail),r.next=5,e.getStorageSync("openid");case 5:return a=r.sent,r.next=8,(0,i.phoneApi)({encryptedData:n.detail.encryptedData,iv:n.detail.iv,openid:a});case 8:if(c=r.sent,console.log("phoneApi：",c),!c.phone||!c.auth){r.next=17;break}return t.briefingDay(t.searchDate),t.phone=c.phone,r.next=15,e.setStorageSync("phone",c.phone);case 15:r.next=22;break;case 17:if(c.auth){r.next=22;break}return e.showModal({title:"提示",content:"手机号不在白名单，请联系管理员添加~",showCancel:!1}),t.phone=null,r.next=22,e.setStorageSync("phone","");case 22:return r.next=24,e.setStorageSync("token",c.token);case 24:case"end":return r.stop()}}),r)})))()}}};n.default=u}).call(this,t(2)["default"])},185:function(e,n,t){"use strict";t.r(n);var r=t(186),o=t.n(r);for(var a in r)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(a);n["default"]=o.a},186:function(e,n,t){}},[[179,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/week/index.js.map